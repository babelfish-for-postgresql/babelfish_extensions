-- psql
-- Insert all possible UNICODE and UTF-8 valid characters
CREATE TABLE all_utf8_chars(col1 BYTEA, col2 TEXT)
GO


DO $$
DECLARE
    erro TEXT;
    cnt INT:= 1;
    var TEXT;
BEGIN
    WHILE cnt <= 1114112 LOOP
        BEGIN
            INSERT INTO all_utf8_chars VALUES (cast(chr(cnt) as bytea), chr(cnt));
        EXCEPTION
        WHEN others THEN
        END;       
        cnt := cnt + 1;
    END LOOP;
END;         
$$;
SELECT COUNT(*) FROM all_utf8_chars
    WHERE sys.remove_accents_internal(col2) != sys.remove_accents_internal_using_icu(col2);
GO
~~START~~
int8
0
~~END~~


DROP TABLE all_utf8_chars
GO
