

-- test for dropping multiple objects at once
-- objects should include both existent and non existent
-- try differnet permutation e.x. DROP TABLE table_exist, table_does_not_exist
-- test with IF EXISTS as well
-- ####### TABLES #######
CREATE TABLE BABEL_4367_1 (
    id INT
)
GO

DROP TABLE BABEL_4367_1, BABEL_4367_2
GO
~~ERROR (Code: 3701)~~

~~ERROR (Message: table "babel_4367_2" does not exist)~~


DROP TABLE BABEL_4367_1
SELECT name FROM sys.tables WHERE name in ('BABEL_4367_1', 'BABEL_4367_2') ORDER BY name ASC
GO
~~START~~
varchar
~~END~~


CREATE TABLE BABEL_4367_1 (
    id INT
)
GO

DROP TABLE IF EXISTS BABEL_4367_1, BABEL_4367_2
GO
SELECT name FROM sys.tables WHERE name in ('BABEL_4367_1', 'BABEL_4367_2') ORDER BY name ASC
GO
~~START~~
varchar
~~END~~


CREATE TABLE BABEL_4367_1 (
    id INT
)
GO

DROP TABLE IF EXISTS BABEL_4367_2, BABEL_4367_1
GO
SELECT name FROM sys.tables WHERE name in ('BABEL_4367_1', 'BABEL_4367_2') ORDER BY name ASC
GO
~~START~~
varchar
~~END~~


CREATE TABLE BABEL_4367_2 (
    id INT
)
GO

CREATE TABLE BABEL_4367_3 (
    id INT
)
GO

DROP TABLE BABEL_4367_1, BABEL_4367_2, BABEL_4367_3
GO
~~ERROR (Code: 3701)~~

~~ERROR (Message: table "babel_4367_1" does not exist)~~

SELECT name FROM sys.tables WHERE name in ('BABEL_4367_1', 'BABEL_4367_2','BABEL_4367_3') ORDER BY name ASC
GO
~~START~~
varchar
babel_4367_2
babel_4367_3
~~END~~


DROP TABLE BABEL_4367_2, BABEL_4367_1, BABEL_4367_3
GO
~~ERROR (Code: 3701)~~

~~ERROR (Message: table "babel_4367_1" does not exist)~~

SELECT name FROM sys.tables WHERE name in ('BABEL_4367_1', 'BABEL_4367_2','BABEL_4367_3') ORDER BY name ASC
GO
~~START~~
varchar
babel_4367_2
babel_4367_3
~~END~~


DROP TABLE IF EXISTS BABEL_4367_1, BABEL_4367_2, BABEL_4367_3
GO
SELECT name FROM sys.tables WHERE name in ('BABEL_4367_1', 'BABEL_4367_2','BABEL_4367_3') ORDER BY name ASC
GO
~~START~~
varchar
~~END~~


CREATE TABLE BABEL_4367_2 (
    id INT
)
GO

CREATE TABLE BABEL_4367_3 (
    id INT
)
GO

DROP TABLE IF EXISTS BABEL_4367_2, BABEL_4367_1, BABEL_4367_3
GO
SELECT name FROM sys.tables WHERE name in ('BABEL_4367_1', 'BABEL_4367_2','BABEL_4367_3') ORDER BY name ASC
GO
~~START~~
varchar
~~END~~



-- ####### FUNCTIONS #######
CREATE FUNCTION BABEL_4367_func()
RETURNS BIGINT
AS BEGIN RETURN 10 END
GO

DROP FUNCTION BABEL_4367_f, BABEL_4367_func
GO
~~ERROR (Code: 3701)~~

~~ERROR (Message: could not find a function named "babel_4367_f")~~


DROP FUNCTION BABEL_4367_func
GO
SELECT name FROM sys.objects WHERE name = 'BABEL_4367_func' ORDER BY name ASC
GO
~~START~~
varchar
~~END~~


CREATE FUNCTION BABEL_4367_func()
RETURNS BIGINT
AS BEGIN RETURN 10 END
GO

DROP FUNCTION IF EXISTS BABEL_4367_f, BABEL_4367_func
GO
SELECT name FROM sys.objects WHERE name = 'BABEL_4367_func' ORDER BY name ASC
GO
~~START~~
varchar
~~END~~



-- ####### VIEWS #######
CREATE TABLE BABEL_4367_1 (
    id INT
)
INSERT INTO BABEL_4367_1 VALUES (1), (2), (3)
GO
~~ROW COUNT: 3~~


CREATE VIEW BABEL_4367_VIEW_1 AS SELECT * FROM BABEL_4367_1 WHERE id > 1
GO

DROP VIEW BABEL_4367_VIEW_1, BABEL_4367_VIEW_2
GO
~~ERROR (Code: 3701)~~

~~ERROR (Message: view "babel_4367_view_2" does not exist)~~

SELECT name FROM sys.objects WHERE name = 'BABEL_4367_VIEW_1'
GO
~~START~~
varchar
babel_4367_view_1
~~END~~

DROP VIEW BABEL_4367_VIEW_2, BABEL_4367_VIEW_1
GO
~~ERROR (Code: 3701)~~

~~ERROR (Message: view "babel_4367_view_2" does not exist)~~

SELECT name FROM sys.objects WHERE name = 'BABEL_4367_VIEW_1'
GO
~~START~~
varchar
babel_4367_view_1
~~END~~

DROP VIEW BABEL_4367_VIEW_1
GO
SELECT name FROM sys.objects WHERE name = 'BABEL_4367_VIEW_1'
GO
~~START~~
varchar
~~END~~


CREATE VIEW BABEL_4367_VIEW_1 AS SELECT * FROM BABEL_4367_1 WHERE id > 1
GO
CREATE VIEW BABEL_4367_VIEW_2 AS SELECT * FROM BABEL_4367_1 WHERE id <3
GO

DROP VIEW BABEL_4367_VIEW_1, BABEL_4367_VIEW_2
GO
SELECT name FROM sys.objects WHERE name in ('BABEL_4367_VIEW_1', 'BABEL_4367_VIEW_2') ORDER BY name ASC
GO
~~START~~
varchar
~~END~~


CREATE VIEW BABEL_4367_VIEW_1 AS SELECT * FROM BABEL_4367_1 WHERE id > 1
GO
CREATE VIEW BABEL_4367_VIEW_2 AS SELECT * FROM BABEL_4367_1 WHERE id <3
GO

DROP VIEW IF EXISTS BABEL_4367_VIEW_1, BABEL_4367_VIEW_2
GO
SELECT name FROM sys.objects WHERE name in ('BABEL_4367_VIEW_1', 'BABEL_4367_VIEW_2') ORDER BY name ASC
GO
~~START~~
varchar
~~END~~


CREATE VIEW BABEL_4367_VIEW_2 AS SELECT * FROM BABEL_4367_1 WHERE id <3
GO

DROP VIEW IF EXISTS BABEL_4367_VIEW_1, BABEL_4367_VIEW_2
GO
SELECT name FROM sys.objects WHERE name in ('BABEL_4367_VIEW_1', 'BABEL_4367_VIEW_2') ORDER BY name ASC
GO
~~START~~
varchar
~~END~~



-- #### CLEANUP  #####
-- DROP VIEWS FIRST SINCE THEY DEPEND ON TABLE
DROP VIEW IF EXISTS BABEL_4367_VIEW_1, BABEL_4367_VIEW_2
GO
DROP TABLE IF EXISTS BABEL_4367_1, BABEL_4367_2, BABEL_4367_3
GO
DROP FUNCTION IF EXISTS BABEL_4367_func
GO
