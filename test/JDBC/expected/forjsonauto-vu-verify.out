SELECT * FROM forjson_vu_v_1
GO
~~START~~
nvarchar
[{"users.userid": 1, "o": [{"order.productId": 1, "product.oid": 2, "p": [{"product.price": "20"}, {"product.price": "20"}, {"product.price": "30"}, {"product.price": "30"}]}, {"order.productId": 1, "product.oid": 1, "p": [{"product.price": "20"}, {"product.price": "20"}, {"product.price": "30"}, {"product.price": "30"}]}]}]
~~END~~


SELECT * FROM forjson_vu_v_2
GO
~~START~~
nvarchar
[{"users.userid": 1, "firstname": "j"}, {"users.userid": 1, "firstname": "e"}]
~~END~~


SELECT * FROM forjson_vu_v_3
GO
~~START~~
nvarchar
[{"users.userid": 1, "firstname": "j", "o": [{"order.productId": 1}, {"order.productId": 1}]}, {"users.userid": 1, "firstname": "e", "o": [{"order.productId": 1}, {"order.productId": 1}]}]
~~END~~


SELECT * FROM forjson_vu_v_4
GO
~~START~~
nvarchar
[{"users.userid": 1, "o": [{"order.productId": 1, "product.oid": 2, "p": [{"product.price": "20", "s": [{"totalsales": 50}, {"totalsales": 50}]}]}, {"order.productId": 1, "product.oid": 1, "p": [{"product.price": "30", "s": [{"totalsales": 100}, {"totalsales": 100}]}]}, {"order.productId": 1, "product.oid": 2, "p": [{"product.price": "30", "s": [{"totalsales": 100}, {"totalsales": 100}]}]}, {"order.productId": 1, "product.oid": 1, "p": [{"product.price": "20", "s": [{"totalsales": 50}, {"totalsales": 50}]}]}]}]
~~END~~


SELECT * FROM forjson_vu_v_5
GO
~~START~~
nvarchar
[{"Id": 1, "firstname": "j", "forjson_auto_vu_t_orders": [{"productId": 1}, {"productId": 1}]}, {"Id": 1, "firstname": "e", "forjson_auto_vu_t_orders": [{"productId": 1}, {"productId": 1}]}]
~~END~~


SELECT * FROM forjson_vu_v_6
GO
~~START~~
nvarchar
[{"Id": 1, "firstname": "j", "lastname": "o"}, {"Id": 1, "firstname": "e", "lastname": "l"}]
~~END~~


SELECT * FROM forjson_vu_v_7
GO
~~START~~
nvarchar
[{"Id": 1, "p": [{"name": "A", "price": "20"}, {"name": "A", "price": "20"}, {"name": "B", "price": "30"}, {"name": "B", "price": "30"}]}]
~~END~~


SELECT * FROM forjson_vu_v_8
GO
~~START~~
nvarchar
[{"users.userid": 1, "o": [{"order.productId": 1, "product.oid": 2, "p": [{"product.price": "20", "s": [{"totalsales": 50}, {"totalsales": 50}]}]}, {"order.productId": 1, "product.oid": 1, "p": [{"product.price": "30", "s": [{"totalsales": 100}, {"totalsales": 100}]}]}, {"order.productId": 1, "product.oid": 2, "p": [{"product.price": "30", "s": [{"totalsales": 100}, {"totalsales": 100}]}]}, {"order.productId": 1, "product.oid": 1, "p": [{"product.price": "20", "s": [{"totalsales": 50}, {"totalsales": 50}]}]}]}]
~~END~~


SELECT * FROM forjson_vu_v_9
GO
~~START~~
nvarchar
[{"users.userid": 1, "o": [{"order.productId": 1, "product.oid": 2, "p": [{"product.price": "20", "s": [{"totalsales": 50, "t": [{"date": "2023-11-26"}, {"date": "2023-11-26"}]}]}]}, {"order.productId": 1, "product.oid": 1, "p": [{"product.price": "30", "s": [{"totalsales": 100, "t": [{"date": "2023-11-27"}, {"date": "2023-11-27"}]}]}]}, {"order.productId": 1, "product.oid": 2, "p": [{"product.price": "30", "s": [{"totalsales": 100, "t": [{"date": "2023-11-27"}, {"date": "2023-11-27"}]}]}]}, {"order.productId": 1, "product.oid": 1, "p": [{"product.price": "20", "s": [{"totalsales": 50, "t": [{"date": "2023-11-26"}, {"date": "2023-11-26"}]}]}]}]}]
~~END~~


SELECT * FROM forjson_vu_v_10
GO
~~START~~
nvarchar
[{"users.userid": 1, "o": [{"өглөө": 1, "product.oid": 2, "p": [{"product.price": "20", "s": [{"totalsales": 50}, {"totalsales": 50}]}]}, {"өглөө": 1, "product.oid": 1, "p": [{"product.price": "30", "s": [{"totalsales": 100}, {"totalsales": 100}]}]}, {"өглөө": 1, "product.oid": 2, "p": [{"product.price": "30", "s": [{"totalsales": 100}, {"totalsales": 100}]}]}, {"өглөө": 1, "product.oid": 1, "p": [{"product.price": "20", "s": [{"totalsales": 50}, {"totalsales": 50}]}]}]}]
~~END~~


SELECT * FROM forjson_vu_v_11
GO
~~START~~
nvarchar
[{"users.ελπίδα": 1, "爱": "j", "كلب": "o"}, {"users.ελπίδα": 1, "爱": "e", "كلب": "l"}]
~~END~~


SELECT * FROM forjson_vu_v_12
GO
~~START~~
nvarchar
[{"totalSales": 50}, {"totalSales": 100}, {"totalSales": null}, {"totalSales": null}]
~~END~~


SELECT * FROM forjson_vu_v_13
GO
~~START~~
nvarchar
{"a": "[{\"x\": \"some string\"}]"}
~~END~~


SELECT * FROM forjson_vu_v_14
GO
~~START~~
nvarchar
[{"o": [{"p": [{"s": [{"totalsales": 50}, {"totalsales": 50}], "product.price": "20"}], "product.oid": 2, "order.productId": 1}, {"p": [{"s": [{"totalsales": 100}, {"totalsales": 100}], "product.price": "30"}], "product.oid": 1, "order.productId": 1}, {"p": [{"s": [{"totalsales": 100}, {"totalsales": 100}], "product.price": "30"}], "product.oid": 2, "order.productId": 1}, {"p": [{"s": [{"totalsales": 50}, {"totalsales": 50}], "product.price": "20"}], "product.oid": 1, "order.productId": 1}], "users.userid": 1}]
~~END~~


EXECUTE forjson_vu_p_1
GO
~~START~~
nvarchar
[{"users.userid": 1, "o": [{"order.productId": 1, "product.oid": 2, "p": [{"product.price": "20", "s": [{"totalsales": 50}, {"totalsales": 50}]}]}, {"order.productId": 1, "product.oid": 1, "p": [{"product.price": "30", "s": [{"totalsales": 100}, {"totalsales": 100}]}]}, {"order.productId": 1, "product.oid": 2, "p": [{"product.price": "30", "s": [{"totalsales": 100}, {"totalsales": 100}]}]}, {"order.productId": 1, "product.oid": 1, "p": [{"product.price": "20", "s": [{"totalsales": 50}, {"totalsales": 50}]}]}]}]
~~END~~


EXECUTE forjson_vu_p_2
GO
~~ROW COUNT: 3~~

~~ROW COUNT: 2~~

~~START~~
nvarchar
[{"users.userid": 1, "firstname": "j"}, {"users.userid": 2, "firstname": "k"}]
~~END~~


EXECUTE forjson_vu_p_3
GO
~~START~~
nvarchar
[{"Id": 1, "Id": 1}]
~~END~~


EXECUTE forjson_vu_p_4
GO
~~START~~
nvarchar
[{"Id": 1, "forjson_auto_vu_t_orders": [{"productId": 1}, {"productId": 1}]}]
~~END~~


EXECUTE forjson_vu_p_5
GO
~~ERROR (Code: 33557097)~~

~~ERROR (Message: sub-select and values for json auto are not currently supported.)~~


EXECUTE forjson_vu_p_6
GO
~~START~~
nvarchar
[{"id": 1, "firstname": "j", "details": [{"productId": 1}, {"productId": 1}]}, {"id": 1, "firstname": "e", "details": [{"productId": 1}, {"productId": 1}]}]
~~END~~


EXECUTE forjson_vu_p_7
GO
~~START~~
nvarchar
[{"Id": 1, "firstname": "j", "lastname": "o", "email": "testemail"}, {"Id": 1, "firstname": "e", "lastname": "l", "email": "testemail2"}]
~~END~~


EXECUTE forjson_vu_p_8
GO
~~START~~
nvarchar
~~ERROR (Code: 33557097)~~

~~ERROR (Message: sub-select and values for json auto are not currently supported.)~~


EXECUTE forjson_vu_p_9
GO
~~START~~
nvarchar
[{"id": 1, "details": 1}]
~~END~~


EXECUTE forjson_vu_p_10
GO
~~START~~
nvarchar
[{"Id": 1, "o": [{"orderdate": "2023-06-25"}]}]
~~END~~


EXECUTE forjson_vu_p_11
GO
~~START~~
nvarchar
[{"id": 1, "details": [{"productId": 1}]}]
~~END~~


EXECUTE forjson_vu_p_12
GO
~~START~~
nvarchar
[{"id": 1, "firstname": "j", "details": [{"lastname": "o", "productId": 1}, {"lastname": "o", "productId": 1}]}, {"id": 1, "firstname": "e", "details": [{"lastname": "l", "productId": 1}, {"lastname": "l", "productId": 1}]}]
~~END~~


EXECUTE forjson_vu_p_13
GO
~~START~~
nvarchar
[{"Id": 1, "firstname": "j", "lastname": "o", "email": "testemail"}, {"Id": 1, "firstname": "e", "lastname": "l", "email": "testemail2"}]
~~END~~


EXECUTE forjson_vu_p_14
GO
~~START~~
nvarchar
[{"id": 1, "firstname": "j", "details": [{"o": [{"productId": 1}, {"productId": 1}], "price": "30"}, {"o": [{"productId": 1}, {"productId": 1}], "price": "20"}]}, {"id": 1, "firstname": "e", "details": [{"o": [{"productId": 1}, {"productId": 1}], "price": "30"}, {"o": [{"productId": 1}, {"productId": 1}], "price": "20"}]}]
~~END~~


EXECUTE forjson_vu_p_15
GO
~~START~~
nvarchar
[{"id": 1, "firstname": "j", "details": "[{\"price\": \"30\", \"o\": [{\"productId\": 1}, {\"productId\": 1}]}, {\"price\": \"20\", \"o\": [{\"productId\": 1}, {\"productId\": 1}]}]"}, {"id": 1, "firstname": "e", "details": "[{\"price\": \"30\", \"o\": [{\"productId\": 1}, {\"productId\": 1}]}, {\"price\": \"20\", \"o\": [{\"productId\": 1}, {\"productId\": 1}]}]"}]
~~END~~


SELECT forjson_vu_f_2()
GO
~~START~~
nvarchar
[{"users.userid": 1, "o": [{"өглөө": 1, "product.oid": 2, "p": [{"product.price": "20", "s": [{"totalsales": 50}, {"totalsales": 50}]}]}, {"өглөө": 1, "product.oid": 1, "p": [{"product.price": "30", "s": [{"totalsales": 100}, {"totalsales": 100}]}]}, {"өглөө": 1, "product.oid": 2, "p": [{"product.price": "30", "s": [{"totalsales": 100}, {"totalsales": 100}]}]}, {"өглөө": 1, "product.oid": 1, "p": [{"product.price": "20", "s": [{"totalsales": 50}, {"totalsales": 50}]}]}]}]
~~END~~


INSERT INTO forjson_auto_vu_t_users VALUES (1, 'e', 'o', 'testemail3')
go
~~START~~
nvarchar
[{"id": 1, "firstname": "j"}, {"id": 1, "firstname": "e"}, {"id": 1, "firstname": "e"}]
~~END~~

~~START~~
nvarchar
[{"users.userid": 1, "firstname": "e", "lastname": "l", "o": [{"order.productId": 1}, {"order.productId": 1}]}, {"users.userid": 1, "firstname": "j", "lastname": "o", "o": [{"order.productId": 1}, {"order.productId": 1}]}, {"users.userid": 1, "firstname": "e", "lastname": "o", "o": [{"order.productId": 1}, {"order.productId": 1}]}]
~~END~~

~~ROW COUNT: 1~~

