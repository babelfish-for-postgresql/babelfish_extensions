-- Customer case
CREATE TABLE [dbo].[babel_5031_MemberValues](
    [Id] [uniqueidentifier] NOT NULL,
    [PanelId] [uniqueidentifier] NOT NULL,
    [EndEffectiveDate] [datetime2](7) NOT NULL
);
GO

CREATE NONCLUSTERED INDEX [babel_5031_IDX_MBRVAL_SHARED_LATEST_FILT] ON [dbo].[babel_5031_MemberValues] ([PanelId] ASC)
WHERE ([EndEffectiveDate]=CONVERT([datetime2](7),'9999-12-31 23:59:59.9999999'));
GO

DROP TABLE babel_5031_MemberValues
GO

-- Using convert function for converting from string to date/datetime/datetime2/datetimeoffset/smalldatetime/time 
-- in computed column of table
CREATE TABLE babel_5031_t1(col_string VARCHAR(100),
                        col_date AS CONVERT(date, col_string),
                        col_datetime AS CONVERT(datetime, col_string),
                        col_datetime2 AS CONVERT(datetime2, col_string),
                        col_dateoffset AS CONVERT(datetimeoffset, col_string),
                        col_smalldatetime AS CONVERT(smalldatetime, col_string),
                        col_time AS CONVERT(time, col_string));
GO

INSERT INTO babel_5031_t1 VALUES('2026-12-31 23:59:59.99');
GO
~~ROW COUNT: 1~~


INSERT INTO babel_5031_t1 VALUES('11.12.2024');
GO
~~ROW COUNT: 1~~


INSERT INTO babel_5031_t1 VALUES('2022-10-30T03:00:00.123');
GO
~~ROW COUNT: 1~~


INSERT INTO babel_5031_t1 VALUES('20240129 03:00:00');
GO
~~ROW COUNT: 1~~


SELECT * FROM babel_5031_t1
GO
~~START~~
varchar#!#date#!#datetime#!#datetime2#!#datetimeoffset#!#smalldatetime#!#time
2026-12-31 23:59:59.99#!#2026-12-31#!#2026-12-31 23:59:59.99#!#2026-12-31 23:59:59.9900000#!#2026-12-31 23:59:59.9900000 +00:00#!#2027-01-01 00:00:00.0#!#23:59:59.9900000
11.12.2024#!#2024-11-12#!#2024-11-12 00:00:00.0#!#2024-11-12 00:00:00.0000000#!#2024-11-12 00:00:00.0000000 +00:00#!#2024-11-12 00:00:00.0#!#00:00:00.0000000
2022-10-30T03:00:00.123#!#2022-10-30#!#2022-10-30 03:00:00.123#!#2022-10-30 03:00:00.1230000#!#2022-10-30 03:00:00.1230000 +00:00#!#2022-10-30 03:00:00.0#!#03:00:00.1230000
20240129 03:00:00#!#2024-01-29#!#2024-01-29 03:00:00.0#!#2024-01-29 03:00:00.0000000#!#2024-01-29 03:00:00.0000000 +00:00#!#2024-01-29 03:00:00.0#!#03:00:00.0000000
~~END~~


DROP TABLE babel_5031_t1
GO

-- Using convert function for converting from string to date/datetime/datetime2/datetimeoffset/smalldatetime/time 
-- in check constraint of table
CREATE TABLE babel_5031_t2(col_string VARCHAR(100),
                        CHECK (CONVERT(date, col_string) > CONVERT(date, '03-05-2023')),
                        CHECK (CONVERT(datetime, col_string) > CONVERT(datetime, '03-05-2023')),
                        CHECK (CONVERT(datetime2, col_string) > CONVERT(datetime2, '03-05-2023')),
                        CHECK (CONVERT(datetimeoffset, col_string) > CONVERT(datetimeoffset, '03-05-2023')),
                        CHECK (CONVERT(smalldatetime, col_string) > CONVERT(smalldatetime, '03-05-2023')),
                        CHECK (CONVERT(time, col_string) > CONVERT(time, '03-05-2023')));
GO

INSERT INTO babel_5031_t2 VALUES('2026-12-31 23:59:59.99');
GO
~~ROW COUNT: 1~~


INSERT INTO babel_5031_t2 VALUES('11.12.2024');
GO
~~ERROR (Code: 547)~~

~~ERROR (Message: new row for relation "babel_5031_t2" violates check constraint "babel_5031_t2_col_string_check5")~~


INSERT INTO babel_5031_t2 VALUES('2022-10-30T03:00:00.123');
GO
~~ERROR (Code: 547)~~

~~ERROR (Message: new row for relation "babel_5031_t2" violates check constraint "babel_5031_t2_col_string_check")~~


INSERT INTO babel_5031_t2 VALUES('20240129 03:00:00');
GO
~~ROW COUNT: 1~~


SELECT * FROM babel_5031_t2
GO
~~START~~
varchar
2026-12-31 23:59:59.99
20240129 03:00:00
~~END~~


DROP TABLE babel_5031_t2
GO
