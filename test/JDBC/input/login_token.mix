-- tsql
create login lt1 with password = '123';
go

create login lt2 with password = '123';
go

create user lt2;
go

create login lt3 with password = '123'
go

alter server role sysadmin add member lt3;
go

-- tsql
select name, type, usage from sys.login_token;
go
select name, type, usage from sys.user_token;
go

-- tsql user=lt1 password = 123
select name, type, usage from sys.login_token;
go
select name, type, usage from sys.user_token;
go

-- tsql user=lt2 password = 123
select name, type, usage from sys.login_token;
go
select name, type, usage from sys.user_token;
go
select name, type, usage from sys.user_token;
go

-- tsql user=lt3 password = 123
select name, type, usage from sys.login_token;
go
select name, type, usage from sys.user_token;
go

-- tsql
drop user lt2;
go

-- psql
SELECT pg_terminate_backend(pid) FROM pg_stat_get_activity(NULL)
WHERE sys.suser_name(usesysid) = 'lt1' AND backend_type = 'client backend' AND usesysid IS NOT NULL;
go

-- Wait to sync with another session
SELECT pg_sleep(1);
go

SELECT pg_terminate_backend(pid) FROM pg_stat_get_activity(NULL)
WHERE sys.suser_name(usesysid) = 'lt2' AND backend_type = 'client backend' AND usesysid IS NOT NULL;
go

-- Wait to sync with another session
SELECT pg_sleep(1);
go

SELECT pg_terminate_backend(pid) FROM pg_stat_get_activity(NULL)
WHERE sys.suser_name(usesysid) = 'lt3' AND backend_type = 'client backend' AND usesysid IS NOT NULL;
go

-- Wait to sync with another session
SELECT pg_sleep(1);
go

-- tsql
drop login lt1;
go
drop login lt2;
go
drop login lt3;
go
