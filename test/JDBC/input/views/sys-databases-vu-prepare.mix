-- psql
ALTER SYSTEM SET babelfishpg_tsql.migration_mode = 'multi-db';
SELECT pg_reload_conf();
GO

-- tsql
CREATE DATABASE db_sys_databases_vu_prepare
GO

CREATE DATABASE db_sys_databases_vu_prepare1;
GO

CREATE DATABASE db_sys_databases_vu_prepare2;
GO

CREATE VIEW sys_databases_view_vu_prepare AS
SELECT name, compatibility_level, collation_name FROM sys.databases WHERE name = 'db_sys_databases_vu_prepare'
GO

CREATE PROC sys_databases_proc_vu_prepare AS
SELECT name, compatibility_level, collation_name FROM sys.databases WHERE name = 'db_sys_databases_vu_prepare'
GO

CREATE FUNCTION sys_databases_func_vu_prepare()
RETURNS TINYINT
AS
BEGIN
    RETURN (SELECT compatibility_level FROM sys.databases WHERE name = 'db_sys_databases_vu_prepare')
END
GO
