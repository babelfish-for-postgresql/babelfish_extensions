-- sla 100000
-- Insert all possible UNICODE and UTF-8 valid characters
-- psql
CREATE TABLE all_utf8_chars(col1 BYTEA, col2 TEXT)
GO

DO $$
DECLARE
    erro TEXT;
    cnt INT:= 1;
    var TEXT;
BEGIN
    WHILE cnt <= 1114112 LOOP
        BEGIN
            INSERT INTO all_utf8_chars VALUES (cast(chr(cnt) as bytea), chr(cnt));
        EXCEPTION
        WHEN others THEN
        END;       
        cnt := cnt + 1;
    END LOOP;
END;         
$$;

-- Generate a mapping for every required character
-- ex:  /* Ã† */    {0xc386, 0x4145}    /* AE */
SELECT REPLACE(FORMAT('/* %s */    {%s, %s},    /* %s */',col2, col1, cast(sys.remove_accents_internal_using_icu(col2) as bytea), sys.remove_accents_internal_using_icu(col2)), '\', '0')
    FROM all_utf8_chars
    WHERE col2 != sys.remove_accents_internal_using_icu(col2);
GO

DROP TABLE all_utf8_chars
GO
