-- test serverproperty() function
-- invalid property name, should reutnr NULL
select serverproperty('invalid property');
go
-- valid supported properties
select serverproperty('collation');
go
select 'true' where serverproperty('collationId') >= 0;
go
select serverproperty('IsSingleUser');
go
select serverproperty('ServerName');
go

-- BABEL-1286
SELECT SERVERPROPERTY('babelfish');
go


-- BABEL-3587
-- psql
Alter system set babelfishpg_tds.product_version = "15.4.3000.6";
SELECT pg_reload_conf();
GO

-- tsql
exec pg_sleep 1
GO

SELECT SERVERPROPERTY('ProductLevel');
GO

-- psql
Alter system set babelfishpg_tds.product_version = "15.0.3000.6";
SELECT pg_reload_conf();
GO

-- tsql
exec pg_sleep 1
GO

SELECT SERVERPROPERTY('ProductLevel');
GO

-- psql
Alter system set babelfishpg_tds.product_version = "15.2.4.6";
SELECT pg_reload_conf();
GO

-- tsql
exec pg_sleep 1
GO

SELECT SERVERPROPERTY('ProductLevel');
GO

-- psql
Alter system set babelfishpg_tds.product_version = "default";
SELECT pg_reload_conf();
GO

-- tsql
exec pg_sleep 1
GO

SELECT SERVERPROPERTY('ProductLevel');
GO
